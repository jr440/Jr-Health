<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mental Health Check-in</title>
<style>
:root {
--neon-pink: #ff2a6d;
--neon-blue: #05d9e8;
--neon-purple: #b700ff;
--neon-yellow: #f9f002;
--dark-bg: #01012b;
--darker-bg: #000016;
--card-bg: rgba(1, 1, 43, 0.7);
}
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}
body {
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
background: var(--darker-bg);
min-height: 100vh;
padding: 20px;
color: #fff;
position: relative;
overflow-x: hidden;
}
body::before {
content: '';
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: 
linear-gradient(45deg, transparent 45%, rgba(255, 42, 109, 0.1) 50%, transparent 55%),
linear-gradient(-45deg, transparent 45%, rgba(5, 217, 232, 0.1) 50%, transparent 55%);
background-size: 300% 300%;
animation: gradientMove 8s ease infinite;
z-index: -1;
}
@keyframes gradientMove {
0%, 100% { background-position: 0% 0%; }
50% { background-position: 100% 100%; }
}
.container {
max-width: 900px;
margin: 0 auto;
background: var(--card-bg);
border-radius: 25px;
padding: 35px;
box-shadow: 
0 0 20px rgba(255, 42, 109, 0.2),
0 0 40px rgba(5, 217, 232, 0.1),
inset 0 0 60px rgba(1, 1, 43, 0.5);
backdrop-filter: blur(10px);
border: 1px solid rgba(5, 217, 232, 0.3);
position: relative;
overflow: hidden;
}
.container::before {
content: '';
position: absolute;
top: 0;
left: 0;
right: 0;
bottom: 0;
background-image: 
linear-gradient(90deg, var(--card-bg) 2px, transparent 2px),
linear-gradient(0deg, var(--card-bg) 2px, transparent 2px);
background-size: 50px 50px;
background-position: -2px -2px;
opacity: 0.1;
pointer-events: none;
}
.header {
text-align: center;
margin-bottom: 30px;
}
.header h1 {
color: var(--neon-pink);
font-size: 2.5em;
text-transform: uppercase;
letter-spacing: 3px;
text-shadow: 
0 0 10px var(--neon-pink),
0 0 20px var(--neon-pink),
0 0 40px var(--neon-pink);
animation: textGlow 2s ease-in-out infinite alternate;
}
.date {
color: var(--neon-blue);
font-size: 1.2em;
text-shadow: 0 0 10px var(--neon-blue);
}
@keyframes textGlow {
from { text-shadow: 0 0 10px var(--neon-pink), 0 0 20px var(--neon-pink); }
to { text-shadow: 0 0 15px var(--neon-pink), 0 0 25px var(--neon-pink), 0 0 35px var(--neon-pink); }
}
.stats-bar {
display: flex;
justify-content: space-around;
background: rgba(5, 217, 232, 0.1);
padding: 25px;
border-radius: 20px;
margin-bottom: 35px;
border: 1px solid var(--neon-blue);
box-shadow: 0 0 20px rgba(5, 217, 232, 0.2);
}
.stat-item {
text-align: center;
}
.stat-number {
font-size: 2.2em;
font-weight: bold;
color: var(--neon-blue);
text-shadow: 0 0 10px var(--neon-blue);
}
.stat-label {
color: #fff;
font-size: 0.9em;
text-transform: uppercase;
letter-spacing: 1px;
opacity: 0.8;
}
.question-group {
margin-bottom: 30px;
padding: 25px;
background: rgba(1, 1, 43, 0.6);
border-radius: 20px;
border-left: 3px solid var(--neon-purple);
transition: all 0.3s ease;
box-shadow: 0 0 20px rgba(183, 0, 255, 0.1);
}
.question-group:hover {
transform: translateY(-5px);
box-shadow: 
0 5px 20px rgba(183, 0, 255, 0.2),
0 0 30px rgba(183, 0, 255, 0.1);
}
.question-title {
font-size: 1.4em;
font-weight: 600;
color: var(--neon-yellow);
margin-bottom: 20px;
text-shadow: 0 0 10px rgba(249, 240, 2, 0.5);
}
.slider-container {
margin: 20px 0;
}
.slider {
width: 100%;
height: 8px;
border-radius: 4px;
background: rgba(5, 217, 232, 0.2);
outline: none;
-webkit-appearance: none;
}
.slider::-webkit-slider-thumb {
-webkit-appearance: none;
width: 24px;
height: 24px;
border-radius: 50%;
background: var(--neon-blue);
cursor: pointer;
box-shadow: 
0 0 10px var(--neon-blue),
0 0 20px var(--neon-blue);
border: 2px solid rgba(255, 255, 255, 0.8);
}
.slider::-moz-range-thumb {
width: 24px;
height: 24px;
border-radius: 50%;
background: var(--neon-blue);
cursor: pointer;
border: none;
box-shadow: 
0 0 10px var(--neon-blue),
0 0 20px var(--neon-blue);
border: 2px solid rgba(255, 255, 255, 0.8);
}
.slider-value {
text-align: center;
font-weight: bold;
font-size: 1.3em;
color: var(--neon-blue);
margin-top: 12px;
text-shadow: 0 0 10px var(--neon-blue);
}
.slider-labels {
display: flex;
justify-content: space-between;
margin-top: 10px;
font-size: 0.9em;
color: rgba(255, 255, 255, 0.7);
}
.button-group {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
gap: 15px;
margin-top: 15px;
}
.mood-button {
padding: 16px 24px;
border: 2px solid var(--neon-pink);
background: rgba(255, 42, 109, 0.1);
border-radius: 15px;
cursor: pointer;
transition: all 0.3s ease;
font-size: 1.15em;
color: #fff;
text-transform: uppercase;
letter-spacing: 1px;
}
.mood-button:hover {
transform: translateY(-3px);
box-shadow: 
0 0 20px rgba(255, 42, 109, 0.3),
0 0 40px rgba(255, 42, 109, 0.1);
background: rgba(255, 42, 109, 0.2);
}
.mood-button.selected {
background: var(--neon-pink);
color: #fff;
box-shadow: 
0 0 20px var(--neon-pink),
0 0 40px var(--neon-pink);
}
.days-clean {
background: linear-gradient(45deg, rgba(5, 217, 232, 0.2), rgba(183, 0, 255, 0.2));
color: #fff;
padding: 25px;
border-radius: 20px;
text-align: center;
margin-bottom: 30px;
border: 1px solid var(--neon-blue);
box-shadow: 
0 0 20px rgba(5, 217, 232, 0.2),
0 0 40px rgba(183, 0, 255, 0.1);
}
.days-clean h3 {
font-size: 2em;
color: var(--neon-blue);
text-shadow: 0 0 10px var(--neon-blue);
margin-bottom: 8px;
}
.button-container {
display: flex;
gap: 15px;
margin-top: 30px;
}
.submit-btn, .export-btn {
flex: 1;
padding: 20px 35px;
border-radius: 18px;
font-size: 1.3em;
font-weight: 600;
transition: all 0.3s ease;
border: none;
text-transform: uppercase;
letter-spacing: 2px;
cursor: pointer;
color: #fff;
}
.submit-btn {
background: var(--neon-pink);
box-shadow: 0 0 20px rgba(255, 42, 109, 0.4);
}
.export-btn {
background: var(--neon-blue);
box-shadow: 0 0 20px rgba(5, 217, 232, 0.4);
}
.submit-btn:hover, .export-btn:hover {
transform: translateY(-3px);
box-shadow: 
0 0 30px var(--neon-pink),
0 0 60px rgba(255, 42, 109, 0.4);
}
.text-input {
width: 100%;
padding: 20px;
border: 2px solid var(--neon-blue);
border-radius: 15px;
font-size: 1.1em;
resize: vertical;
min-height: 120px;
background: rgba(1, 1, 43, 0.6);
color: #fff;
transition: all 0.3s ease;
}
.text-input:focus {
outline: none;
border-color: var(--neon-pink);
box-shadow: 
0 0 20px rgba(255, 42, 109, 0.2),
0 0 40px rgba(255, 42, 109, 0.1);
}
.success-message {
display: none;
background: rgba(5, 217, 232, 0.2);
color: #fff;
padding: 20px;
border-radius: 15px;
text-align: center;
font-size: 1.2em;
margin-top: 25px;
border: 1px solid var(--neon-blue);
box-shadow: 
0 0 20px rgba(5, 217, 232, 0.3),
0 0 40px rgba(5, 217, 232, 0.1);
text-transform: uppercase;
letter-spacing: 2px;
}
.recovery-section { border-left-color: var(--neon-blue); }
.ndis-section { border-left-color: var(--neon-purple); }
.health-section { border-left-color: var(--neon-pink); }
.family-section { border-left-color: var(--neon-yellow); }
.checkbox-group {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: 10px;
margin-top: 15px;
}
.checkbox-item {
display: flex;
align-items: center;
padding: 12px 20px;
background: rgba(1, 1, 43, 0.6);
border: 2px solid var(--neon-blue);
border-radius: 12px;
cursor: pointer;
transition: all 0.3s ease;
color: #fff;
}
.checkbox-item:hover {
background: rgba(5, 217, 232, 0.1);
box-shadow: 0 0 20px rgba(5, 217, 232, 0.2);
}
.checkbox-item input[type="checkbox"] {
margin-right: 10px;
transform: scale(1.2);
}
.checkbox-item.checked {
background: var(--neon-blue);
color: #fff;
box-shadow: 
0 0 20px var(--neon-blue),
0 0 40px rgba(5, 217, 232, 0.3);
}
@keyframes scan {
from { transform: translateY(0); }
to { transform: translateY(100vh); }
}
.container::after {
content: '';
position: absolute;
top: 0;
left: 0;
right: 0;
height: 4px;
background: var(--neon-blue);
opacity: 0.5;
filter: blur(4px);
animation: scan 3s linear infinite;
}
.exit-button {
position: fixed;
top: 20px;
right: 20px;
padding: 10px 20px;
background: var(--neon-pink);
color: white;
border: none;
border-radius: 8px;
cursor: pointer;
font-size: 1.1em;
transition: all 0.3s ease;
z-index: 1000;
text-transform: uppercase;
letter-spacing: 1px;
box-shadow: 0 0 15px var(--neon-pink);
}
.exit-button:hover {
background: var(--neon-pink);
transform: scale(1.05);
box-shadow: 0 0 25px var(--neon-pink);
}
</style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>JR's Mental Health Check-in</h1>
            <div class="date" id="currentDate"></div>
        </div>
        
        <!-- Days Clean Counter -->
        <div class="days-clean">
            <h3 id="daysCleanCount">0 Days Clean</h3>
            <p>Keep going strong, Jesse! üí™</p>
        </div>
        
        <!-- Stats Bar -->
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-number" id="totalCheckins">0</div>
                <div class="stat-label">Total Check-ins</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="currentStreak">0</div>
                <div class="stat-label">Current Streak</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="avgMood">0</div>
                <div class="stat-label">Avg Mood (7 days)</div>
            </div>
        </div>
        
        <form id="checkinForm">
            <!-- Overall Mood -->
            <div class="question-group">
                <div class="question-title">How are you feeling overall today?</div>
                <div class="slider-container">
                    <input type="range" min="1" max="10" value="5" class="slider" id="overallMood">
                    <div class="slider-labels">
                        <span>Very Low</span>
                        <span>Neutral</span>
                        <span>Very High</span>
                    </div>
                    <div class="slider-value" id="overallMoodValue">5</div>
                </div>
            </div>
            
            <!-- Energy Level -->
            <div class="question-group">
                <div class="question-title">What's your energy level?</div>
                <div class="slider-container">
                    <input type="range" min="1" max="10" value="5" class="slider" id="energyLevel">
                    <div class="slider-labels">
                        <span>Exhausted</span>
                        <span>Moderate</span>
                        <span>Energized</span>
                    </div>
                    <div class="slider-value" id="energyLevelValue">5</div>
                </div>
            </div>
            
            <!-- Anxiety Level -->
            <div class="question-group">
                <div class="question-title">How's your anxiety today?</div>
                <div class="slider-container">
                    <input type="range" min="1" max="10" value="5" class="slider" id="anxietyLevel">
                    <div class="slider-labels">
                        <span>Very Calm</span>
                        <span>Moderate</span>
                        <span>Very Anxious</span>
                    </div>
                    <div class="slider-value" id="anxietyLevelValue">5</div>
                </div>
            </div>
            
            <!-- Focus & ADHD -->
            <div class="question-group">
                <div class="question-title">How's your focus and attention today?</div>
                <div class="slider-container">
                    <input type="range" min="1" max="10" value="5" class="slider" id="focusLevel">
                    <div class="slider-labels">
                        <span>Very Scattered</span>
                        <span>Moderate</span>
                        <span>Very Focused</span>
                    </div>
                    <div class="slider-value" id="focusLevelValue">5</div>
                </div>
            </div>
            
            <!-- Pain Level -->
            <div class="question-group health-section">
                <div class="question-title">How's your body pain today?</div>
                <div class="slider-container">
                    <input type="range" min="1" max="10" value="5" class="slider" id="painLevel">
                    <div class="slider-labels">
                        <span>No Pain</span>
                        <span>Moderate</span>
                        <span>Severe Pain</span>
                    </div>
                    <div class="slider-value" id="painLevelValue">5</div>
                </div>
            </div>
            
            <!-- Sleep Quality -->
            <div class="question-group health-section">
                <div class="question-title">How was your sleep last night?</div>
                <div class="slider-container">
                    <input type="range" min="1" max="10" value="5" class="slider" id="sleepQuality">
                    <div class="slider-labels">
                        <span>Terrible</span>
                        <span>Average</span>
                        <span>Excellent</span>
                    </div>
                    <div class="slider-value" id="sleepQualityValue">5</div>
                </div>
            </div>
            
            <!-- Recovery Status -->
            <div class="question-group recovery-section">
                <div class="question-title">How are you feeling about your recovery today?</div>
                <div class="button-group">
                    <button type="button" class="mood-button" data-group="recovery" data-value="strong">üí™ Strong</button>
                    <button type="button" class="mood-button" data-group="recovery" data-value="confident">üòå Confident</button>
                    <button type="button" class="mood-button" data-group="recovery" data-value="neutral">üòê Neutral</button>
                    <button type="button" class="mood-button" data-group="recovery" data-value="struggling">üò∞ Struggling</button>
                    <button type="button" class="mood-button" data-group="recovery" data-value="vulnerable">üòî Vulnerable</button>
                </div>
            </div>
            
            <!-- Daily Functioning -->
            <div class="question-group ndis-section">
                <div class="question-title">Daily Functioning Level</div>
                <div class="slider-container">
                    <input type="range" min="1" max="10" value="5" class="slider" id="dailyFunctioning">
                    <div class="slider-labels">
                        <span>High Support</span>
                        <span>Moderate</span>
                        <span>Independent</span>
                    </div>
                    <div class="slider-value" id="dailyFunctioningValue">5</div>
                </div>
            </div>
            
            <!-- Parenting Stress -->
            <div class="question-group family-section">
                <div class="question-title">How's your parenting stress level today?</div>
                <div class="slider-container">
                    <input type="range" min="1" max="10" value="5" class="slider" id="parentingStress">
                    <div class="slider-labels">
                        <span>Very Low</span>
                        <span>Moderate</span>
                        <span>Very High</span>
                    </div>
                    <div class="slider-value" id="parentingStressValue">5</div>
                </div>
            </div>
            
            <!-- Coping Strategies Used -->
            <div class="question-group recovery-section">
                <div class="question-title">Which coping strategies did you use today?</div>
                <div class="checkbox-group">
                    <label class="checkbox-item">
                        <input type="checkbox" name="copingStrategies" value="meditation">
                        Meditation/Mindfulness
                    </label>
                    <label class="checkbox-item">
                        <input type="checkbox" name="copingStrategies" value="exercise">
                        Physical Exercise
                    </label>
                    <label class="checkbox-item">
                        <input type="checkbox" name="copingStrategies" value="breathing">
                        Breathing Exercises
                    </label>
                    <label class="checkbox-item">
                        <input type="checkbox" name="copingStrategies" value="journaling">
                        Journaling
                    </label>
                    <label class="checkbox-item">
                        <input type="checkbox" name="copingStrategies" value="social">
                        Social Support
                    </label>
                    <label class="checkbox-item">
                        <input type="checkbox" name="copingStrategies" value="therapy">
                        Therapy/Counseling
                    </label>
                </div>
            </div>
            
            <!-- Daily Goals -->
            <div class="question-group">
                <div class="question-title">What's your main focus for today?</div>
                <div class="button-group">
                    <button type="button" class="mood-button" data-group="goals" data-value="self-care">üßò Self-care</button>
                    <button type="button" class="mood-button" data-group="goals" data-value="family">üë®‚Äçüë©‚Äçüëß Family time</button>
                    <button type="button" class="mood-button" data-group="goals" data-value="recovery">üéØ Recovery focus</button>
                    <button type="button" class="mood-button" data-group="goals" data-value="health">üè• Health management</button>
                    <button type="button" class="mood-button" data-group="goals" data-value="rest">üò¥ Rest & recovery</button>
                </div>
            </div>
            
            <!-- Additional Notes -->
            <div class="question-group">
                <div class="question-title">Additional notes for today (optional)</div>
                <textarea class="text-input" id="additionalNotes" placeholder="Anything else you'd like to track or remember about today..."></textarea>
            </div>
            
            <div class="button-container">
                <button type="submit" class="submit-btn">Complete Check-in</button>
                <button type="button" class="export-btn" id="exportBtn">Export Data (CSV)</button>
            </div>
        </form>
        
        <div class="success-message" id="successMessage">
            ‚úÖ Check-in completed successfully! Data saved to file.
        </div>
    </div>
    
    <!-- Exit Button -->
    <button class="exit-button" id="exitButton">Exit</button>
    
    <script>
        // Initialize data
        let checkinData = JSON.parse(localStorage.getItem('mentalHealthCheckins') || '[]');
        
        // Fixed recovery start date - May 7, 2025
        const RECOVERY_START_DATE = '2025-05-07';
        
        // Store the recovery start date in localStorage for persistence
        localStorage.setItem('recoveryStartDate', RECOVERY_START_DATE);
        
        // Set current date
        document.getElementById('currentDate').textContent = new Date().toLocaleDateString('en-US', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
        
        // Calculate days clean from May 7, 2025
        function calculateDaysClean() {
            const startDate = new Date(RECOVERY_START_DATE);
            const today = new Date();
            
            // For demo/testing purposes - if today is before start date, show 0 days
            if (today < startDate) {
                return 0;
            }
            
            // Calculate days between dates
            const timeDiff = today.getTime() - startDate.getTime();
            return Math.floor(timeDiff / (1000 * 60 * 60 * 24));
        }
        
        // Update days clean counter
        function updateDaysClean() {
            const daysClean = calculateDaysClean();
            document.getElementById('daysCleanCount').textContent = `${daysClean} Days Clean`;
        }
        
        // Update stats
        function updateStats() {
            const totalCheckins = checkinData.length;
            document.getElementById('totalCheckins').textContent = totalCheckins;
            
            // Calculate current streak
            let currentStreak = 0;
            const today = new Date().toISOString().split('T')[0];
            const dates = checkinData.map(entry => entry.date).sort().reverse();
            
            for (let i = 0; i < dates.length; i++) {
                const checkDate = new Date(dates[i]);
                const expectedDate = new Date();
                expectedDate.setDate(expectedDate.getDate() - i);
                
                if (checkDate.toISOString().split('T')[0] === expectedDate.toISOString().split('T')[0]) {
                    currentStreak++;
                } else {
                    break;
                }
            }
            document.getElementById('currentStreak').textContent = currentStreak;
            
            // Calculate average mood (last 7 days)
            const last7Days = checkinData.slice(-7);
            const avgMood = last7Days.length > 0 
                ? (last7Days.reduce((sum, entry) => sum + parseInt(entry.overallMood), 0) / last7Days.length).toFixed(1)
                : 0;
            document.getElementById('avgMood').textContent = avgMood;
            
            // Update days clean counter
            updateDaysClean();
        }
        
        // Initial update of stats
        updateStats();
        
        // Handle slider updates
        const sliders = document.querySelectorAll('.slider');
        sliders.forEach(slider => {
            const valueDisplay = document.getElementById(slider.id + 'Value');
            slider.addEventListener('input', function() {
                valueDisplay.textContent = this.value;
            });
        });
        
        // Handle button selections
        const buttons = document.querySelectorAll('.mood-button');
        buttons.forEach(button => {
            button.addEventListener('click', function() {
                const group = this.dataset.group;
                const groupButtons = document.querySelectorAll(`[data-group="${group}"]`);
                groupButtons.forEach(btn => btn.classList.remove('selected'));
                this.classList.add('selected');
            });
        });
        
        // Handle checkbox styling
        const checkboxItems = document.querySelectorAll('.checkbox-item');
        checkboxItems.forEach(item => {
            const checkbox = item.querySelector('input[type="checkbox"]');
            checkbox.addEventListener('change', function() {
                if (this.checked) {
                    item.classList.add('checked');
                } else {
                    item.classList.remove('checked');
                }
            });
            
            item.addEventListener('click', function(e) {
                if (e.target !== checkbox) {
                    checkbox.checked = !checkbox.checked;
                    checkbox.dispatchEvent(new Event('change'));
                }
            });
        });
        
        // Handle form submission
        document.getElementById('checkinForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Collect coping strategies
            const copingStrategies = Array.from(document.querySelectorAll('input[name="copingStrategies"]:checked'))
                .map(checkbox => checkbox.value);
            
            const data = {
                date: new Date().toISOString().split('T')[0],
                timestamp: new Date().toISOString(),
                overallMood: document.getElementById('overallMood').value,
                energyLevel: document.getElementById('energyLevel').value,
                anxietyLevel: document.getElementById('anxietyLevel').value,
                focusLevel: document.getElementById('focusLevel').value,
                painLevel: document.getElementById('painLevel').value,
                sleepQuality: document.getElementById('sleepQuality').value,
                dailyFunctioning: document.getElementById('dailyFunctioning').value,
                parentingStress: document.getElementById('parentingStress').value,
                recovery: document.querySelector('[data-group="recovery"].selected')?.dataset.value || '',
                goals: document.querySelector('[data-group="goals"].selected')?.dataset.value || '',
                copingStrategies: copingStrategies.join(';'),
                additionalNotes: document.getElementById('additionalNotes').value
            };
            
            // Store data locally
            checkinData.push(data);
            localStorage.setItem('mentalHealthCheckins', JSON.stringify(checkinData));
            
            // Save to CSV file (this will create a download)
            saveToCSV(data);
            
            // Update stats
            updateStats();
            
            // Show success message
            const successMessage = document.getElementById('successMessage');
            successMessage.style.display = 'block';
            setTimeout(() => {
                successMessage.style.display = 'none';
            }, 3000);
            
            console.log('Check-in data:', data);
        });
        
        // CSV Export functionality
        function saveToCSV(newData = null) {
            const csvData = newData ? [...checkinData] : checkinData;
            
            if (csvData.length === 0) {
                alert('No data to export!');
                return;
            }
            
            // CSV headers
            const headers = [
                'Date', 'Timestamp', 'Overall Mood', 'Energy Level', 'Anxiety Level', 
                'Focus Level', 'Pain Level', 'Sleep Quality', 'Daily Functioning', 
                'Parenting Stress', 'Recovery Status', 'Goals', 'Coping Strategies', 
                'Additional Notes'
            ];
            
            // Convert data to CSV format
            const csvContent = [
                headers.join(','),
                ...csvData.map(row => [
                    row.date,
                    row.timestamp,
                    row.overallMood,
                    row.energyLevel,
                    row.anxietyLevel,
                    row.focusLevel,
                    row.painLevel,
                    row.sleepQuality,
                    row.dailyFunctioning,
                    row.parentingStress,
                    row.recovery,
                    row.goals,
                    `"${row.copingStrategies}"`,
                    `"${row.additionalNotes}"`
                ].join(','))
            ].join('\n');
            
            // Create and download file
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `mental-health-data-${new Date().toISOString().split('T')[0]}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        
        // Export button
        document.getElementById('exportBtn').addEventListener('click', function() {
            saveToCSV();
        });
        
        // Exit button functionality
        document.getElementById('exitButton').addEventListener('click', function() {
            if (confirm('Are you sure you want to exit?')) {
                window.close();
            }
        });
    </script>
</body>
</html>